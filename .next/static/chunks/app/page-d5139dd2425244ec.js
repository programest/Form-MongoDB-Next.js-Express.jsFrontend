(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{296:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),n=s(8334),o=s.n(n),i=s(6874),l=s.n(i),u=s(5695),p=s(2528);function c(){let{login:e}=(0,p.A)(),[t,s]=(0,r.useState)({username:"",password:""}),[n,i]=(0,r.useState)(""),c=(0,u.useRouter)(),d=e=>{s({...t,[e.target.name]:e.target.value})},h=async s=>{s.preventDefault(),i("");try{let s=await fetch("".concat("https://form-mongodb-nextjs-expressjs-production.up.railway.app","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json();if(!s.ok)throw Error(a.error||"Ошибка входа");e(a.user),i("✅ Вход успешен!"),setTimeout(()=>c.push("/dashboard"),1e3)}catch(e){i(e.message)}};return(0,a.jsx)("div",{className:o().container,children:(0,a.jsxs)("div",{className:o().formWrapper,children:[(0,a.jsx)("h2",{className:o().title,children:"Вход"}),n&&(0,a.jsx)("p",{className:o().message,children:n}),(0,a.jsxs)("form",{onSubmit:h,children:[(0,a.jsx)("input",{className:o().input,type:"text",name:"username",placeholder:"Логин",onChange:d,required:!0}),(0,a.jsx)("input",{className:o().input,type:"password",name:"password",placeholder:"Пароль",onChange:d,required:!0}),(0,a.jsx)("button",{className:o().button,type:"submit",children:"Войти"})]}),(0,a.jsxs)("p",{className:o().toggle,children:["Нет аккаунта? ",(0,a.jsx)(l(),{href:"/register",children:"Зарегистрироваться"})]})]})})}},2528:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>i});var a=s(5155),r=s(2115);let n=(0,r.createContext)(null);function o(){return(0,r.useContext)(n)}function i(e){let{children:t}=e,[s,o]=(0,r.useState)(null);return(0,a.jsx)(n.Provider,{value:{user:s,login:e=>{o(e)},logout:()=>{o(null)}},children:t})}},4881:(e,t,s)=>{Promise.resolve().then(s.bind(s,296))},8334:e=>{e.exports={container:"page_container__aoG4z",formWrapper:"page_formWrapper__g4WBb",title:"page_title__3jonF",input:"page_input___cVLA",button:"page_button__vnlhW",message:"page_message__abnJo",toggle:"page_toggle__ni725"}}},e=>{var t=t=>e(e.s=t);e.O(0,[397,244,441,684,358],()=>t(4881)),_N_E=e.O()}]);