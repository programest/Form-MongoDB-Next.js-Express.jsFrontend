(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1053:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5155),s=n(2528),u=n(5695),l=n(2115),o=n(9969),a=n.n(o);function i(){let{user:e,logout:t}=(0,s.A)(),n=(0,u.useRouter)(),[o,i]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{if(!e){n.push("/");return}(async()=>{try{let e=await fetch("".concat("https://form-mongodb-nextjs-expressjs-production.up.railway.app","/users")),t=await e.json();i(t)}catch(e){console.error("Ошибка загрузки пользователей",e)}finally{d(!1)}})()},[e,n]),e)?(0,r.jsxs)("div",{className:a().container,children:[(0,r.jsxs)("h2",{className:a().title,children:["Добро пожаловать, ",e.username,"!"]}),(0,r.jsx)("h3",{children:"Список всех пользователей:"}),c?(0,r.jsx)("p",{children:"Загрузка..."}):(0,r.jsx)("ul",{children:o.map(e=>(0,r.jsxs)("li",{children:[e.username," - ",e.email]},e._id))}),(0,r.jsx)("div",{className:a().buttonGroup,children:(0,r.jsx)("button",{className:a().button,onClick:t,children:"Выйти"})})]}):null}},2507:(e,t,n)=>{Promise.resolve().then(n.bind(n,1053))},2528:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,AuthProvider:()=>o});var r=n(5155),s=n(2115);let u=(0,s.createContext)(null);function l(){return(0,s.useContext)(u)}function o(e){let{children:t}=e,[n,l]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&l(JSON.parse(e))},[]),(0,r.jsx)(u.Provider,{value:{user:n,login:e=>{l(e),localStorage.setItem("user",JSON.stringify(e))},logout:()=>{l(null),localStorage.removeItem("user")}},children:t})}},5695:(e,t,n)=>{"use strict";var r=n(8999);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},9969:e=>{e.exports={container:"main_container__MnvZ_",title:"main_title__Hy9oz",buttonGroup:"main_buttonGroup__OIfBi",button:"main_button__v6bbj",deleteButton:"main_deleteButton__4vlZ8"}}},e=>{var t=t=>e(e.s=t);e.O(0,[394,441,684,358],()=>t(2507)),_N_E=e.O()}]);